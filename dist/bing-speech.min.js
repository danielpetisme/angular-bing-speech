// Copyright (c) 2017 Daniel Petisme
// Licensed under the MIT license
!function(){"use strict";function e(e,o){function t(e){var t=$q.defer();return o.login().then(function(o){e.headers=e.headers||{},e.headers.Authorization="Bearer "+o,t.resolve(e)}).catch(function(e){t.reject(e)}),t.promise}var r={request:t};return r}angular.module("bing-speech.auth",[]).factory("BingSpeechAuthInterceptor",e),e.$inject=["$http","BingSpeechAuth"]}(),
// Copyright (c) 2017 Daniel Petisme
// Licensed under the MIT license
function(){"use strict";function e(){function e(e,t,r,c){function i(){return o?e.post(c,{},{headers:{"Ocp-Apim-Subscription-Key":o}}).then(function(e){return e.data}):r.reject("No subscription key defined")}function n(){var e=t.authenticationToken,o=t.tokenExpirationDate;return e&&o>Date.now()?r.resolve(e):i().then(function(e){return t.authenticationToken=e,t.tokenExpirationDate=Date.now()+54e4,e}).catch(function(e){return r.reject(e)})}var a={login:n};return a}this.$get=e;var o;this.useSubscriptionKey=function(e){o=e},e.$inject=["$http","$localStorage","$q","ISSUE_TOKEN_URL"]}angular.module("bing-speech.auth",["ngStorage"]).constant("ISSUE_TOKEN_URL","https://api.cognitive.microsoft.com/sts/v1.0/issueToken").provider("BingSpeechAuth",e),e.$inject=[]}(),
// Copyright (c) 2017 Daniel Petisme
// Licensed under the MIT license
function(){"use strict";angular.module("bing-speech",["bing-speech.auth","bing-speech.service"]).run(["$httpProvider",function(e){e.interceptors.push("BingSpeechAuth")}])}(),
// Copyright (c) 2017 Daniel Petisme
// Licensed under the MIT license
function(){"use strict";function e(e,o,t){function r(r,c){return r?c&&0!==c.length?e.post(t.RECOGNIZE_URL,r,{params:{version:"3.0",requestid:i(),appID:"D4D52672-91D7-4C74-8AD8-42B1D98141A5",format:"json",locale:c,"device.os":"0_0",scenarios:"ulm",instanceid:i()},headers:{"Content-Type":"audio/wav; samplerate=44100"}}):o.reject("A locale must be defined"):o.reject("An audio stream must be defined")}function c(r,c,i){if(!r||0===r.length)return o.reject("A text must be defined");if(!c||0===c.length)return o.reject("A locale must be defined");if(!i||0===i.length)return o.reject("A gender must be defined");var n=t.FONTS[c+" "+i];if(!n)return o.reject("No font found for locale: "+c+" and gender: "+i);var a=t.SMML_TEMPLATE.replace(/%LOCALE%/gi,c).replace(/%GENDER%/gi,i).replace(/%FONT%/gi,n).replace(/%TEXT%/gi,r);return e.post(t.SYNTHESIZE_URL,a,{responseType:"arraybuffer",headers:{Accept:"audio/basic","Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":"riff-8khz-8bit-mono-mulaw","X-Search-AppId":"07D3234E49CE426DAA29772419F436CA","X-Search-ClientID":"1ECFAE91408841A480F00935DC390960"}})}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var o=16*Math.random()|0;return("x"===e?o:3&o|8).toString(16)})}var n={recognize:r,synthesize:c};return n}angular.module("bing-speech.service",[]).constant("BING_SPEECH",{RECOGNIZE_URL:"https://speech.platform.bing.com/recognize",SYNTHESIZE_URL:"https://speech.platform.bing.com/synthesize",SMML_TEMPLATE:'<speak version="1.0" xml:lang="%LOCALE%"> <voice name="%FONT%" xml:lang="%LOCALE%" xml:gender="%GENDER%">%TEXT%</voice></speak>',FONTS:{"ar-EG female":"Microsoft Server Speech Text to Speech Voice (ar-EG, Hoda)","de-DE female":"Microsoft Server Speech Text to Speech Voice (de-DE, Hedda)","de-DE male":"Microsoft Server Speech Text to Speech Voice (de-DE, Stefan, Apollo)","en-AU female":"Microsoft Server Speech Text to Speech Voice (en-AU, Catherine)","en-CA female":"Microsoft Server Speech Text to Speech Voice (en-CA, Linda)","en-GB female":"Microsoft Server Speech Text to Speech Voice (en-GB, Susan, Apollo)","en-GB male":"Microsoft Server Speech Text to Speech Voice (en-GB, George, Apollo)","en-IN male":"Microsoft Server Speech Text to Speech Voice (en-IN, Ravi, Apollo)","en-US female":"Microsoft Server Speech Text to Speech Voice (en-US, ZiraRUS)","en-US male":"Microsoft Server Speech Text to Speech Voice (en-US, BenjaminRUS)","es-ES female":"Microsoft Server Speech Text to Speech Voice (es-ES, Laura, Apollo)","es-ES male":"Microsoft Server Speech Text to Speech Voice (es-ES, Pablo, Apollo)","es-MX male":"Microsoft Server Speech Text to Speech Voice (es-MX, Raul, Apollo)","fr-CA female":"Microsoft Server Speech Text to Speech Voice (fr-CA, Caroline)","fr-FR female":"Microsoft Server Speech Text to Speech Voice (fr-FR, Julie, Apollo)","fr-FR male":"Microsoft Server Speech Text to Speech Voice (fr-FR, Paul, Apollo)","it-IT male":"Microsoft Server Speech Text to Speech Voice (it-IT, Cosimo, Apollo)","ja-JP female":"Microsoft Server Speech Text to Speech Voice (ja-JP, Ayumi, Apollo)","ja-JP male":"Microsoft Server Speech Text to Speech Voice (ja-JP, Ichiro, Apollo)","pt-BR male":"Microsoft Server Speech Text to Speech Voice (pt-BR, Daniel, Apollo)","ru-RU female":"Microsoft Server Speech Text to Speech Voice (ru-RU, Irina, Apollo)","ru-RU male":"Microsoft Server Speech Text to Speech Voice (ru-RU, Pavel, Apollo)","zh-CN female":"Microsoft Server Speech Text to Speech Voice (zh-CN, Yaoyao, Apollo)","zh-CN male":"Microsoft Server Speech Text to Speech Voice (zh-CN, Kangkang, Apollo)","zh-HK female":"Microsoft Server Speech Text to Speech Voice (zh-HK, Tracy, Apollo)","zh-HK male":"Microsoft Server Speech Text to Speech Voice (zh-HK, Danny, Apollo)","zh-TW female":"Microsoft Server Speech Text to Speech Voice (zh-TW, Yating, Apollo)","zh-TW male":"Microsoft Server Speech Text to Speech Voice (zh-TW, Zhiwei, Apollo)"}}).factory("BingSpeech",e),e.$inject=["$http","$q","BING_SPEECH"]}();